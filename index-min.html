<!DOCTYPE html><html lang="pl"><head><meta name="author" content="Nikodem Horst"/><meta charset="utf-8"/><meta name="description" content="Darmowa strona do ćwiczenia kształcenia słuchu:interwały. Free excersises for ear training:intervals."/><meta name="keywords" content="interwały,interwał,kształcenie słuchu,ćwiczenia,intervals,ear training"/><meta name="robots" content="index,follow"/><meta name="viewport" content="width=device-width"/><meta property="og:title" content="Darmowe ćwiczenia do kształcenia słuchu. Free ear traning excersises."/><meta property="og:description" content="Naucz się rozpoznawać interwały. Learn to recognize intervals."/><meta property="og:url" content="https://atempo.pl"/><meta name="theme-color" content="#000000"/><title>ATempo</title><link rel="icon" href="data:,"/><style>*{margin:0;padding:0;box-sizing:border-box;font-family:'Gill Sans','Gill Sans MT',Calibri,'Trebuchet MS',sans-serif;color:black}html{height:100%;min-height:100%}body{width:100%;height:100%;height:100dvh}#mainProgram{width:100%;height:100%}#pianoContainer{display:flex;justify-content:space-evenly;align-items:center;flex-wrap:wrap;height:25%}#pianoDiv{margin:0}#mainDiv{}#infoDiv{padding:5px;margin:0;flex-wrap:wrap;border-radius:5px;font-weight:500;display:flex;flex-direction:column;align-items:center}#mainContainer{position:relative;display:flex;justify-content:center;align-items:center;height:40%;overflow:hidden}#statsContainer{display:flex;justify-content:space-around;height:35%}#numStatsDiv{display:flex;justify-content:center;position:relative;width:30%;height:100%;align-content:center;padding:1rem}#numStatTable{border:5px solid red;border-radius:30px}#chartStatsDiv{width:70%;height:90%;display:flex;justify-content:center}@media(max-aspect-ratio:0.71){#mainDiv{}#pianoDiv{flex-basis:100%;order:1;display:flex;justify-content:center}#soundDiv{order:2}#infoDiv{flex-direction:row;align-self:flex-start;order:3}}@media(min-aspect-ratio:1.5)and(orientation:landscape){#mainDiv{}#pianoContainer{width:60%;height:40%}#mainContainer{width:60%;height:60%}#statsContainer{position:absolute;flex-direction:column;top:0;left:60%;width:40%;height:100%}#numStatsDiv{position:relative;align-items:center;width:100%;height:30%}#chartStatsDiv{width:100%;height:70%;left:10px}#infoDiv{flex-direction:row}}@media(min-aspect-ratio:1.8)and(orientation:landscape){#mainDiv{}#infoDiv{flex-direction:column}}#controlsDiv{display:inline-flex;flex-direction:column;align-items:center}#interval-buttons-container{position:relative}.interval-button{display:inline-block;border-radius:50%;border-width:0.5px;background-color:lemonchiffon;color:black;position:absolute;user-select:none}a:link{color:blue}.interval-button:disabled{background-color:white;color:#777777;border:1px dashed lightgray;cursor:not-allowed}#stat-chart-container{margin:5%;display:flex;flex-direction:column;justify-content:space-evenly;align-items:flex-end;position:relative;box-sizing:border-box}#stat-grid-container{position:relative;width:100%;display:flex;justify-content:space-around;align-items:flex-end;box-sizing:border-box}#stat-label-container{width:100%;display:flex;justify-content:space-around;align-items:flex-start;font-size:13px;box-sizing:border-box}.stat-grid-line{position:absolute;left:0;width:100%;height:1px;background-color:#ccc}.stat-grid-label{position:absolute;left:-1.5rem;font-size:1rem;color:black;transform:translateY(+50%)}.stat-interval-group{display:flex;flex-direction:column;align-items:flex-end;justify-items:left}.stat-interval-area{display:flex;flex-direction:row;align-items:flex-end}.stat-interval-label{text-align:center;overflow:hidden;color:black;width:100%;font-size:13px}.stat-bar{width:5px}.stat-good-bar{background-color:limegreen}.stat-bad1-bar{background-color:orange}.stat-bad2-bar{background-color:red}span{display:block}#mainButton{position:relative;cursor:pointer}#mainButton-circle{position:relative;width:100%;height:100%;background-color:#007bff;border-radius:50%;border:0 solid red;transition:background-color 1s}#mainButton-triangle{position:absolute;top:50%;left:55%;transform:translate(-50%,-50%);width:0;height:0;border-top:solid transparent;border-bottom:solid transparent;border-left:solid white}#mainButton-square{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:10px;height:10px;background-color:white;display:none}#btn_Repeat:hover,#btn_Skip:hover{stroke:blue}.btn-sector{stroke-linecap:round}.btn-sector-text{font-family:Arial,Helvetica,sans-serif;text-anchor:middle;dominant-baseline:middle;fill:black;font-weight:700;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.interval-checkbox{cursor:pointer;margin:auto;display:inline-block;position:absolute}#elementMaxError{display:flex;flex-direction:row;align-items:center;top:0;right:0}#elementSoundVolume{display:flex;flex-direction:column;align-items:center}#maxErrorSelect,#soundVolumeSelect{cursor:pointer}#elementControlContainer{display:flex;flex-direction:row}.control-subContainer{display:flex;flex-direction:column}.control-subContainer-label{margin:0 0 auto;user-select:none}.control-checkbox{cursor:pointer;flex-shrink:0}.control-button{display:flex;border-radius:25%;background:greenyellow;flex-direction:row;cursor:pointer;align-items:center}.control-button-label svg{background:greenyellow;user-select:none}.control-button-note-icon{user-select:none;cursor:pointer}.control-button-pause-icon{user-select:none;cursor:pointer}.radio-button{transform:scale(1.5);cursor:pointer}.radio-container{display:flex;align-items:center;margin-bottom:10px;border-radius:25%;background:greenyellow;flex-direction:row}#svg-icon-speaker{}#reset-btn{background-color:red;cursor:pointer;color:white;position:absolute;bottom:0;right:0;margin:10px;border-radius:100%}</style></head><body><div class="mainProgram" style="height:100%"><div id="pianoContainer"><div id="soundDiv"></div><div id="pianoDiv"></div><div id="infoDiv"></div></div><div id="mainContainer"><div id="controlsDiv"></div><div id="mainDiv"></div></div><div id="statsContainer"><div id="numStatsDiv"></div><div id="chartStatsDiv"></div></div></div><script> function updateCSSRulesFromArray(a){var d=document.styleSheets[0],b=d.cssRules || d.rules;a.forEach(function(c){var f=c[0],g=c[1];c=c[2];for(var e=0;e < b.length;e++){var m=b[e];if(m.selectorText===f){m.style[g]=c;break;}}});}function isOverflowing(a){return {horizontal:a.scrollWidth > a.clientWidth,vertical:a.scrollHeight > a.clientHeight,any:a.scrollWidth > a.clientWidth || a.scrollHeight > a.clientHeight,};}function getElementCSS(){var a=document.getElementById('infoDiv');a.style.flexDirection=isOverflowing(document.getElementById('pianoContainer')).vertical?'row':'column';document.getElementById('elementSoundVolume').style.flexDirection=isOverflowing(document.getElementById('pianoContainer')).vertical && 'row'===a.style.flexDirection?'row':'column';window.unitToPixel=isPortrait?window.innerWidth:window.innerHeight;window.unitToPixel/=100;window.optimumWheelDiameter=0.9*document.getElementById('mainContainer').offsetHeight;a=document .getElementById('mainContainer').getBoundingClientRect().width;let d;document.getElementById('controlsDiv');d=mainRefSize*intervalButtonSize*window.unitToPixel*3+2*mainRefSize*window.unitToPixel;const b=window.mainRefSize*window.intervalButtonSize*window.unitToPixel;d+window.optimumWheelDiameter+2.5*b > a &&(optimumWheelDiameter=a-d-2.5*b);window.intervalButtonSize=window.optimumWheelDiameter/window.unitToPixel/window.mainRefSize/6;window.radiusLarge=5*window.intervalButtonSize;window.radiusSmall=0.6*window.radiusLarge;window.strokeWidth=`${4*window.unitToPixel}px`;window.intervalButtonsContainer.style.width=`${mainRefSize*window.unitToPixel*(window.radiusLarge+window.intervalButtonSize)}px`;intervalButtonsContainer.style.height=intervalButtonsContainer.style.width;return [['#mainContainer','column-gap',`${b}px`],['#mainButton','width',`${mainRefSize*window.intervalButtonSize*2*window.unitToPixel}px`,],['#mainButton','height',`${mainRefSize*window.intervalButtonSize*2*window.unitToPixel}px`,],['#mainButton-triangle','border-top-width',`${1*mainRefSize*window.unitToPixel}px`,],['#mainButton-triangle','border-bottom-width',`${1*mainRefSize*window.unitToPixel}px`,],['#mainButton-triangle','border-left-width',`${1.8*mainRefSize*window.unitToPixel}px`,],['#mainButton-square','width',`${1.25*mainRefSize*window.unitToPixel}px`,],['#mainButton-square','height',`${1.25*mainRefSize*window.unitToPixel}px`,],['.interval-button','height',`${mainRefSize*intervalButtonSize*window.unitToPixel}px`,],['.interval-button','width',`${mainRefSize*intervalButtonSize*window.unitToPixel}px`,],['.btn-sector-text','font-size',`${1*mainRefSize*window.unitToPixel}px`,],['.interval-button','font-size',`${((mainRefSize*window.intervalButtonSize)/2.5)*window.unitToPixel}px`,],['.interval-checkbox','width',`${((mainRefSize*window.intervalButtonSize)/2.5)*window.unitToPixel}px`,],['.interval-checkbox','height',`${((mainRefSize*window.intervalButtonSize)/2.5)*window.unitToPixel}px`,],['#controlsDiv','gap',`${0.75*mainRefSize*window.unitToPixel}px`,],['#elementControlContainer','column-gap',`${1*mainRefSize*window.unitToPixel}px`,],['#controlsDiv','column-gap',`${mainRefSize*window.unitToPixel}px`,],['.control-subContainer','gap',`${0.5*mainRefSize*window.unitToPixel}px`,],['.control-subContainer-label','font-size',`${2*mainRefSize*window.unitToPixel}px`,],['.control-button','width',`${3*mainRefSize*window.unitToPixel}px`,],['.control-button','height',`${3*mainRefSize*window.unitToPixel}px`,],['.control-button','padding',`${(mainRefSize/4)*window.unitToPixel}px`,],['.control-button-label','font-size',`${2*mainRefSize*window.unitToPixel}px`,],['.control-button-label svg','width',`${1.5*mainRefSize*window.unitToPixel}px`,],['.control-button-label svg','height',`${1.5*mainRefSize*window.unitToPixel}px`,],['.control-button-label','margin-left',`${(mainRefSize/8)*window.unitToPixel}px`,],['.control-button-note-icon','height',`${2.1*mainRefSize*window.unitToPixel}px`,],['.control-button-note-icon','margin-left',`${0.3*mainRefSize*window.unitToPixel}px`,],['.control-button-pause-icon','width',`${0.7*mainRefSize*window.unitToPixel}px`,],['.control-button-pause-icon','height',`${1.6*mainRefSize*window.unitToPixel}px`,],['.control-button-pause-icon','margin-left',`${0.3*mainRefSize*window.unitToPixel}px`,],['.control-checkbox','width',`${1*mainRefSize*window.unitToPixel}px`,],['.control-checkbox','height',`${1*mainRefSize*window.unitToPixel}px`,],['#maxErrorSelect,#soundVolumeSelect','font-size',`${((mainRefSize*intervalButtonSize)/2.5)*window.unitToPixel}px`,],['.stat-interval-label','font-size',`${mainRefSize*window.unitToPixel}px`,],['span','font-size',`${((mainRefSize*intervalButtonSize)/2.5)*window.unitToPixel}px`,],['#reset-btn','font-size',`${2*mainRefSize*window.unitToPixel}px`,],['#reset-btn','width',`${4*mainRefSize*window.unitToPixel}px`],['#reset-btn','height',`${4*mainRefSize*window.unitToPixel}px`],['#stat-label-container','font-size','13px'],['#infoDiv','font-size',`${mainRefSize*window.unitToPixel}px`],['#numStatTable','font-size',`${1.5*mainRefSize*window.unitToPixel}px`,],['#numStatTable','border-radius',`${(mainRefSize*window.unitToPixel*0.5*intervalButtonSize)/2.5}px`,],['#numStatTable','border-width',`${(mainRefSize*window.unitToPixel*0.125*intervalButtonSize)/2.5}px`,],['#svg-icon-speaker','width',`${mainRefSize*window.unitToPixel*2.5}px`,],['#svg-icon-speaker','height',`${mainRefSize*window.unitToPixel*2.5}px`,],];}function elementControlContainer(){const a=document.createElement('div');a.id='elementControlContainer';Object.keys(window.soundControl).forEach((d)=> {const b=document.createElement('div');b.classList.add('control-subContainer');b.id=d;Object.keys(window.soundControl[d]).forEach((c)=> {const f=`${d}-${c}`,g=document.createElement('div'),e=document.createElement('input');e.type='checkbox';e.classList.add('control-checkbox');e.dataset.group=d;e.dataset.option=c;e.checked=1===window.soundControl[d][c];e.id=f;g.innerHTML=`<label for="${f}" class="control-button-label">${window.controlIcons[d][c]}</label>`;g.classList.add('control-button');g.prepend(e);g.addEventListener('click',(m)=> {m.target !==e && 'LABEL' !==m.target.tagName &&(m.preventDefault(),(e.checked=!e.checked));window.soundControl[d][c]=e.checked?1:0;0===Array.from(document.querySelectorAll(`input[data-group="${d}"]`)).filter((r)=> r.checked).length &&((e.checked=!0),(window.soundControl[d][c]=1));});b.appendChild(g);});a.appendChild(b);});return a;}function disableElementCSS(a){a.style.pointerEvents='none';a.style.opacity='0.5';a.querySelectorAll('input').forEach((d)=> {d.setAttribute('disabled','true');});}function enableElementCSS(a){a.style.pointerEvents='';a.style.opacity='1';a.querySelectorAll('input').forEach((d)=> {d.removeAttribute('disabled');});}function elementMaxError(a){const d=document.createElement('div');d.id='elementMaxError';const b=document.createElement('label');b.textContent='\u274c';b.className='control-subContainer-label';b.setAttribute('for','maxErrorSelect');d.appendChild(b);const c=document.createElement('select');c.id='maxErrorSelect';c.className='dropdown-select';['0','1','2','3','4'].forEach((f,g)=> {const e=document.createElement('option');e.value=g;e.textContent=f;g===a &&(e.selected=!0);c.appendChild(e);});c.addEventListener('change',()=> {window.maxError=c.value;window.refreshCharts();});d.appendChild(c);window.maxError=a;return d;}function elementSoundVolume(a){const d=document.createElement('div');d.id='elementSoundVolume';const b=document.createElement('label');b.innerHTML='<img id="svg-icon-speaker" src="../svg/speaker.svg" alt="G\u0142o\u015bno\u015b\u0107"/>';b.className='control-subContainer-label';b.setAttribute('for','soundVolumeSelect');d.appendChild(b);const c=document.createElement('select');c.id='soundVolumeSelect';c.className='dropdown';['20%','40%','60%','80%','100%'].forEach((f,g)=> {console.log('i=',g);const e=document.createElement('option');e.value=20*(g+1);e.textContent=f;20*(g+1)===a &&(e.selected=!0);c.appendChild(e);});d.appendChild(c);c.addEventListener('change',()=> {window.soundVolume=c.value;});window.soundVolume=a;return d;}const notes='a2 a#2 h2 c3 c#3 d3 d#3 e3 f3 f#3 g3 g#3 a3 a#3 h3 c4 c#4 d4 d#4 e4'.split(' ');function refreshCharts(){var a=document.getElementById('numStatsDiv');a.innerHTML='';a.appendChild(drawNumericStatContainer());a.appendChild(window.resetButton);a=document.getElementById('chartStatsDiv');a.innerHTML='';a.appendChild(drawStatChart(window.globalIntervalStats,0.8*a.offsetWidth,0.9*a.offsetHeight));}function applySoundSettings(){function a(d,b=null){const c=Object.keys(d).filter((g)=> 1===d[g]);if(1===c.length)return b?b[c[0]]:c[0];const f=Math.floor(Math.random()*c.length);return b?b[c[f]]:c[f];}window.soundOrder=a(window.soundControl.interval);'up'===window.soundOrder && window.note2 <=window.note1?([window.note1,window.note2]=[window.note2,window.note1]):'down'===window.soundOrder && window.note1 <=window.note2 &&([window.note1,window.note2]=[window.note2,window.note1]);window.soundLength=a(window.soundControl.length,window.lengthAndDelayValues);window.soundDelay=a(window.soundControl.delay,window.lengthAndDelayValues);tones.volume=window.soundVolume/100;tones.release=400*window.soundLength;tones.sustain=0;}function pickRandomInterval(a,d,b,c=-1){let f=0;do if((f++,(num1=Math.floor(Math.random()*b)),(num2=Math.floor(Math.random()*b)),1e4 < f))throw Error('Przeliczony');while(!(Math.abs(num1-num2)>=a && Math.abs(num1-num2)<=d &&(('1'===window.checkedIntervals[Math.abs(num1-num2)] &&-1===c)|| Math.abs(num1-num2)==c)));-1===c &&(window.intervalToGuess=Math.abs(num1-num2));return [num1,num2];}function PlayInterval(a,d){a=notes[a];const b=notes[d];'both'===window.soundOrder?(keys[a].dispatchEvent(new MouseEvent('click')),keys[b].dispatchEvent(new MouseEvent('click'))):(keys[a].dispatchEvent(new MouseEvent('click')),setTimeout(()=> {keys[b].dispatchEvent(new MouseEvent('click'));},300+500*(window.soundDelay-1)));}function createMainPlayIntervalButton(){function a(){let e=!1;g=setInterval(()=> {b.style.backgroundColor=e?'#007bff':'#5dc7ff';e=!e;},900);}const d=document.createElement('div');d.id='mainButton';const b=document.createElement('div');b.id='mainButton-circle';d.appendChild(b);const c=document.createElement('div');c.id='mainButton-triangle';b.appendChild(c);const f=document.createElement('div');f.id='mainButton-square';b.appendChild(f);let g;window.isPlaying=!1;b.addEventListener('click',()=> {isPlaying?(clearInterval(g),(b.style.backgroundColor='#007bff'),(c.style.display='block'),(f.style.display='none'),(window.svg.style.display='none'),updateCheckedIntervals(!0),enableElementCSS(document.getElementById('elementMaxError')),(window.errorIntervalCounter=0),refreshCharts()):(a(),(c.style.display='none'),(f.style.display='block'),(window.svg.style.display='block'),updateCheckedIntervals(!1),disableElementCSS(document.getElementById('elementMaxError')));window.isPlaying=!window.isPlaying;});return d;}window.createMainPlayIntervalButton=createMainPlayIntervalButton;function scheduleReplay(){setTimeout(()=> {PlayInterval(window.note1,window.note2);},700);}function scheduleNextInterval(){setTimeout(()=> {const a=new MouseEvent('click',{bubbles:!0,cancelable:!0,view:window,});mainButton.dispatchEvent(a);},700);}function createIntervalButton(a,d){const b=document.createElement('button');b.textContent=d;b.id=`intervalButton-${a}`;b.classList.add('interval-button');b.addEventListener('mouseenter',function(){b.style.background='blue';b.style.color='white';});b.addEventListener('mouseleave',function(){b.style.background='';b.style.color='';});b.addEventListener('click',function(){null===window.intervalToGuess?(([window.note1,window.note2]=pickRandomInterval(0,12,20,a)),applySoundSettings(),PlayInterval(window.note1,window.note2)):((b.style.backgroundColor=a===window.intervalToGuess?'lawngreen':'red'),a===window.intervalToGuess?((window.globalIntervalStats[a].good+=1),(window.globalIntervalStats[window.intervalToGuess].bad2+=window.errorIntervalCounter),(window.errorIntervalCounter=0),(window.intervalToGuess=null),scheduleNextInterval()):(window.globalIntervalStats[a].bad1++,0 < window.maxError?(window.errorIntervalCounter++,window.errorIntervalCounter <=window.maxError?scheduleReplay():((window.globalIntervalStats[window.intervalToGuess].bad2+=window.errorIntervalCounter),(window.intervalToGuess=null),(window.errorIntervalCounter=0),scheduleNextInterval())):((window.globalIntervalStats[window.intervalToGuess].bad2+=1),(window.intervalToGuess=null),(window.errorIntervalCounter=0),scheduleNextInterval())),refreshCharts(),setTimeout(()=> {b.style.transition='background-color 3s ease';b.style.backgroundColor='#fff4cd';b.style.color='black';},10),setTimeout(()=> {b.style.transition='';},3e3));});window.refreshCharts=refreshCharts;d=document.createElement('label');d.style.whiteSpace='nowrap';d.setAttribute('for',`intervalCheckbox-${a}`);const c=document.createElement('input');c.type='checkbox';c.classList.add('interval-checkbox');c.id=`intervalCheckbox-${a}`;c.checked='true';c.addEventListener('change',(f)=> {let g=0;window.checkedIntervals='';for(let e=0;13 > e;e++){const m=document.getElementById(`intervalCheckbox-${e}`);m && m.checked?(g++,(window.checkedIntervals+='1')):(window.checkedIntervals+='0');}2 > g?(f.preventDefault(),(c.checked=!0),alert('Zostaw zaznaczone przynajmniej dwa interwa\u0142y.')):updateCheckedIntervals(!0);});d.appendChild(b);d.appendChild(c);return d;}const arrangeButtonsInDoubleClock=(a,d,b)=> {const c=(r,q,p,k)=> {const h=360/r.length;r.forEach((n,t)=> {var w=(Math.PI/180)*(t*h-90);t=p+q*Math.cos(w);w=k+q*Math.sin(w);const x=n.offsetWidth || parseInt(window.getComputedStyle(n).width,10),v=n.offsetHeight || parseInt(window.getComputedStyle(n).height,10);n.style.left=`${(t-x)/2}px`;n.style.top=`${(w-v)/2}px`;});},{firstChildren:f,secondChildren:g}=((r,q)=> {const p=[],k=[];Array.from(r.children).forEach((h)=> {if(h !==q){var [n,t]=h.children;n && p.push(n);t && k.push(t);}});return {firstChildren:p,secondChildren:k};})(a,mainButton),{width:e,height:m}=a.getBoundingClientRect();c(f,b,e,m);c(g,d,e,m);};function addArcSegmentWithMirror(a,d,b,c,f,g,e,m,r){function q(v,l,z,D,B,C){var A=((v-90)*Math.PI)/180,u=((l-90)*Math.PI)/180;v=`M ${d+c*Math.cos(A)},${b+c*Math.sin(A)}A ${c},${c}0 ${180 >=l-v?0:1}1 ${d+c*Math.cos(u)},${b+c*Math.sin(u)}`;const y=document.createElementNS('http://www.w3.org/2000/svg','path');y.setAttribute('id',B);y.setAttribute('class','btn-sector');y.setAttribute('stroke',z);y.setAttribute('d',v);y.setAttribute('stroke-width',e);y.setAttribute('pointer-events','auto');y.addEventListener('click',C);A=(A+u)/2;B=d+c*Math.cos(A);A=b+c*Math.sin(A);u=document.createElementNS('http://www.w3.org/2000/svg','text');u.setAttribute('class','btn-sector-text');u.setAttribute('x',B);u.setAttribute('y',A);u.setAttribute('text-anchor','middle');u.setAttribute('dominant-baseline','middle');u.setAttribute('fill','black');u.setAttribute('pointer-events','auto');u.textContent=D;u.addEventListener('mouseover',()=> {y.setAttribute('stroke','blue');});u.addEventListener('mouseout',()=> {y.setAttribute('stroke',z);});u.addEventListener('click',C);return {path:y,textElement:u};}const p=parseFloat(e)/2,k=2*(c+p),h=document.createElementNS('http://www.w3.org/2000/svg','svg');h.setAttribute('width',k);h.setAttribute('height',k);h.style.position='absolute';h.style.top='50%';h.style.left='50%';h.style.transform='translate(-50%,-50%)';h.style.zIndex=9999;h.style.pointerEvents='none';h.setAttribute('viewBox',`${d-c-p}${b-c-p}${k}${k}`);const {path:n,textElement:t}=q(f,g,'orange',m,'btn_Repeat',()=> {window.errorIntervalCounter++;scheduleReplay();refreshCharts(!1);});h.appendChild(n);h.appendChild(t);const {path:w,textElement:x}=q(180-g,180-f,'red',r,'btn_Skip',()=> {window.globalIntervalStats[window.intervalToGuess].bad2+=1;window.intervalToGuess=null;window.errorIntervalCounter=0;scheduleNextInterval();refreshCharts(!0);});h.appendChild(w);h.appendChild(x);window.svg=h;a.appendChild(h);}var tones={context:new(window.AudioContext || window.webkitAudioContext)(),attack:1,sustain:300,release:100,volume:0.3,type:'square',startNoteFreq:55,semitoneRatio:1.059463,playSemitoneFrequency(a){const d=this.context.createGain(),b=this.context.createOscillator(),c=this.context.currentTime;d.gain.setValueAtTime(0,c);d.gain.linearRampToValueAtTime(this.volume,c+this.attack/1e3);this.sustain=300;const f=c+this.attack/1e3,g=f+this.sustain/1e3;d.gain.setValueAtTime(this.volume,f);d.gain.exponentialRampToValueAtTime(0.001,g+this.release/1e3);d.connect(this.context.destination);b.type=this.type || 'sawtooth';b.frequency.setValueAtTime(a,c);b.connect(d);b.start();b.stop(g+this.release/1e3);},play(a){this.playSemitoneFrequency(this.startNoteFreq*Math.pow(this.semitoneRatio,{c:0,'c#':1,db:1,d:2,'d#':3,eb:3,e:4,f:5,'f#':6,gb:6,g:7,'g#':8,ab:8,a:9,'a#':10,b:10,h:11,}[a.slice(0,-1).toLowerCase()]+12*(a.slice(-1)-1)));},};tones.context.createGain();window.tones=tones;var keys={};window.keys=keys;function piano(a,d){function b(h,n,t,w,x,v){const l=document.createElement('div');l.style.width=`${t}px`;l.style.height=`${w}px`;l.style.position='absolute';l.style.left=`${h}px`;l.style.top=`${n}px`;l.style.backgroundColor=x;l.style.border='solid 1px black';l.style.transition='background-color 0.5s ease';l.note=v;l.addEventListener('click',function(z){tones.play(z.target.note);l.style.backgroundColor='lawngreen';setTimeout(()=> {l.style.backgroundColor=x;},300);});l.addEventListener('dragstart',(z)=> {z.preventDefault();});l.addEventListener('mouseenter',function(z){p && k !==l &&(tones.play(z.target.note),(l.style.backgroundColor='lawngreen'),setTimeout(()=> {l.style.backgroundColor=x;},300),(k=l));});return l;}const c=document.createElement('div');tones.attack=100;const f='a2 h2 c3 d3 e3 f3 g3 a3 h3 c4 d4 e4'.split(' '),g=['c','d','f','g','a'];(a/5)*(f.length+0)> d &&(a=(5*d)/(f.length+0));const e=a/5,m=0.6*e,r=0.6*a;c.style.height=`${a}px`;const q=document.createElement('div');q.style.position='relative';q.style.height=`${a}px`;q.style.width=`${e*f.length}px`;c.appendChild(q);let p=!1,k=null;q.addEventListener('mousedown',(h)=> {p=!0;h.preventDefault();});q.addEventListener('mouseup',()=> {p=!1;k=null;});q.addEventListener('mouseleave',()=> {p=!1;k=null;});for(d=0;d < f.length;d++){const h=b(e*d,0,e,a,'white',f[d]);keys[f[d]]=h;q.appendChild(h);}f.forEach((h,n)=> {n < f.length-1 && g.includes(h[0])&&((n=b(e*(n+1)-0.5*m,0,m,r,'black',h[0]+'#'+h[1])),(keys[h[0]+'#'+h[1]]=n),q.appendChild(n));});return c;}function drawStatChart(a,d,b){const c=Math.max(...a.map((k)=> Math.max(k.good,k.bad1,k.bad2)));let f=b/27;const g=25*f;b=2*f;var e=(g-f)/c;b=e < b?Math.ceil(b/e):1;e=0 < c?Math.ceil(c/b):0;const m=document.createElement('div');m.id='stat-chart-container';m.style.width=d;const r=document.createElement('div');r.id='stat-grid-container';const q=document.createElement('div');q.id='stat-label-container';m.appendChild(r);m.appendChild(q);if(window.globalIntervalStats.every((k)=> 0===k.good && 0===k.bad1 && 0===k.bad2))return m;for(d=0;d <=e;d++){if(d*b > c)continue;const k=d*b;var p=document.createElement('div');p.classList.add('stat-grid-line');const h=((g-2*f-f)/c)*k;p.style.bottom=`${h}px`;r.appendChild(p);0 !==d &&((p=document.createElement('div')),p.classList.add('stat-grid-label'),(p.style.bottom=`${h}px`),(p.textContent=k),r.appendChild(p));}a.forEach((k,h)=> {const n=document.createElement('div');n.classList.add('stat-interval-group');const t=document.createElement('div');t.classList.add('stat-interval-area');var w=0 < c?(g-2*f-f)/c:0,x=k.good*w,v=k.bad1*w;w*=k.bad2;const l=document.createElement('div');l.classList.add('stat-bar','stat-good-bar');l.style.height=`${x}px`;l.title=`${k.good}`;t.appendChild(l);x=document.createElement('div');x.classList.add('stat-bar','stat-bad1-bar');x.style.height=`${v}px`;x.title=`${k.bad1}`;t.appendChild(x);v=document.createElement('div');v.classList.add('stat-bar','stat-bad2-bar');v.style.height=`${w}px`;v.title=`${k.bad2}`;t.appendChild(v);n.appendChild(t);k=document.createElement('div');k.classList.add('stat-interval-label');k.textContent=window.buttonLabels[h];q.appendChild(k);r.appendChild(n);});return m;}function drawNumericStatContainer(){const a=document.createElement('div');a.id='numStatsDivTxt';const d=document.createElement('span');var b=document.createElement('span'),c=document.createElement('span');const f=document.createElement('span');[d,b,c,f].forEach((g)=> {a.appendChild(g);});b=window.globalIntervalStats.reduce((g,e)=> g+e.good,0);c=window.globalIntervalStats.reduce((g,e)=> g+e.bad2,0)+window.errorIntervalCounter;d.innerHTML=`<table id=numStatTable><tr><td>\u{2B50}</td><td>${b}(${0 < c+b?((b/(c+b))*100).toFixed(0):'---'}%)</td></tr><tr><td>\u{1F494}</td><td>${c}</td></tr><tr><td style="text-align:center"><b>=</b></td><td><b>${b+c}</b></td></tr><tr><td>&nbsp</td></tr><tr><td>\u{274C}</td><td>${window.errorIntervalCounter > window.maxError?'*':window.errorIntervalCounter}/${window.maxError}</td></tr></td></tr></table>`;return a;}function resetIntervalStats(){window.globalIntervalStats=Array.from({length:window.buttonLabels.length},()=>({good:0,bad1:0,bad2:0}));var a=document.getElementById('numStatsDiv');a.innerHTML='';a.appendChild(drawNumericStatContainer());a.appendChild(window.resetButton);a=document.getElementById('chartStatsDiv');a.innerHTML='';a.appendChild(drawStatChart(window.globalIntervalStats));}window.soundControl={interval:{up:1,down:0,both:0},length:{short:0,medium:1,long:0},delay:{short:0,medium:1,long:0},};window.lengthAndDelayValues={short:1,medium:2,long:3,};window.controlIcons={interval:{up:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="0" hegiht="0" fill="black"><path d="M26.5 5.5H12.5a1 1 0 0 0 0 2h11.3L6.3 25a1 1 0 0 0 1.4 1.4L25 8.9v11.3a1 1 0 1 0 2 0V5.5a1 1 0 0 0-0.5-1z"/></svg>`,down:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="black" transform="scale(1,-1)"><path d="M26.5 5.5H12.5a1 1 0 0 0 0 2h11.3L6.3 25a1 1 0 0 0 1.4 1.4L25 8.9v11.3a1 1 0 1 0 2 0V5.5a1 1 0 0 0-0.5-1z"/></svg>`,both:'<img class="control-button-note-icon" src=/svg/n4b.svg alt="short">',},length:{short:'<img class="control-button-note-icon" src=/svg/n16u.svg alt="short">',medium:'<img class="control-button-note-icon" src=/svg/n8u.svg alt="medium">',long:'<img class="control-button-note-icon" src=/svg/n4u.svg alt="long">',},delay:{short:'<img class="control-button-pause-icon" src=/svg/p16.svg alt="short">',medium:'<img class="control-button-pause-icon" src=/svg/p8.svg alt="short">',long:'<img class="control-button-pause-icon" src=/svg/p4.svg alt="short">',},};window.defMaxError=3;window.defSoundVolume=20;window.soundVolume=20;window.soundLength=2;window.soundDelay=2;window.soundOrder=1;window.note1=null;window.note2=null;window.intervalToGuess=null;window.errorIntervalCounter=0;window.maxError=3;window.checkedIntervals='1111111111111';window.buttonLabels=['1cz','2m','2w','3m','3w','4cz','Try','5cz','6m','6w','7m','7w','8cz',];window.globalIntervalStats=Array.from({length:window.buttonLabels.length},()=>({good:0,bad1:0,bad2:0,}));window.mainRefSize=2.5;window.isPortrait=window.innerHeight > window.innerWidth;window.intervalButtonSize=2.5;window.radiusLarge=5*window.intervalButtonSize;window.radiusSmall=0.6*window.radiusLarge;const resetButton=document.createElement('button');resetButton.innerHTML='&nbsp0&nbsp';resetButton.id='reset-btn';resetButton.addEventListener('click',resetIntervalStats);window.resetButton=resetButton;function updateCheckedIntervals(visibility){for(let i=0;i < 13;i++){const checkbox=document.getElementById(`intervalCheckbox-${i}`);const button=document.getElementById(`intervalButton-${i}`);if(checkbox){button.disabled=!checkbox.checked;}checkbox.style.display=visibility?'block':'none';}}function drawMainWindow(){const pianoContainer=document.getElementById('pianoContainer');const divPiano=document.getElementById('pianoDiv');const divSound=document.getElementById('soundDiv');const divInfo=document.getElementById('infoDiv');const divMain=document.getElementById('mainDiv');const divControls=document.getElementById('controlsDiv');const divChartStats=document.getElementById('chartStatsDiv');const divNumStats=document.getElementById('numStatsDiv');divPiano.innerHTML='';divMain.innerHTML='';divControls.innerHTML='';divChartStats.innerHTML='';divNumStats.innerHTML='';const controlContainer=elementControlContainer();divControls.appendChild(controlContainer);const mainContainer=document.getElementById('mainContainer');if(!mainContainer.querySelector('#elementMaxError')){const maxErrorContainer=elementMaxError(defMaxError);divControls.appendChild(maxErrorContainer);}soundDiv.innerHTML='';const soundVolumeContainer=elementSoundVolume(defSoundVolume);divSound.appendChild(soundVolumeContainer);const infoDivContainer=document.createElement('div');infoDivContainer.id='infoDiv';infoDiv.innerHTML='<p>&copy 2024 v0.1&nbsp</p><p>Nikodem Horst&nbsp</p><p>(nvhorst@gmail)&nbsp</p><p><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND</a>&nbsp</p><p><a href="https://github.com/nvhorst/atempo">GitHub</a></p>';const statsChart=drawStatChart(window.globalIntervalStats,divChartStats.offsetWidth*0.8,divChartStats.offsetHeight*0.9);divChartStats.appendChild(statsChart);const statsNumeric=drawNumericStatContainer();divNumStats.appendChild(statsNumeric);divNumStats.appendChild(resetButton);const intervalButtonsContainer=document.createElement('div');intervalButtonsContainer.id='interval-buttons-container';const mainIntervalPlayButton=createMainPlayIntervalButton();mainIntervalPlayButton.style.left='50%';mainIntervalPlayButton.style.top='50%';mainIntervalPlayButton.style.transform='translate(-50%,-50%)';intervalButtonsContainer.appendChild(mainIntervalPlayButton);window.intervalButtonsContainer=intervalButtonsContainer;mainIntervalPlayButton.addEventListener('click',()=> {if(window.isPlaying===false){window.intervalToGuess=null;return;}if(window.intervalToGuess !==null)return;[window.note1,window.note2]=pickRandomInterval(0,12,20);window.errorIntervalCounter=0;window.refreshCharts();applySoundSettings();PlayInterval(window.note1,window.note2);});buttonLabels.forEach((label,index)=> {const elementIntervalButton=createIntervalButton(index,label);intervalButtonsContainer.appendChild(elementIntervalButton);});divMain.appendChild(intervalButtonsContainer);divMain.style.position='relative';const pianoKeyboard=piano(pianoContainer.clientHeight*0.8,pianoContainer.clientWidth*0.9);divPiano.appendChild(pianoKeyboard);updateCSSRulesFromArray(getElementCSS());arrangeButtonsInDoubleClock(intervalButtonsContainer,mainRefSize*window.radiusSmall*window.unitToPixel,mainRefSize*window.radiusLarge*window.unitToPixel);addArcSegmentWithMirror(intervalButtonsContainer,intervalButtonsContainer.getBoundingClientRect().width/2,intervalButtonsContainer.getBoundingClientRect().height/2,intervalButtonsContainer.getBoundingClientRect().height/4,-30,30,window.strokeWidth,'\u21BA','>>');window.svg.style.display='none';}applySoundSettings();drawMainWindow();window.addEventListener('resize',()=> {window.isPortrait=window.innerHeight > window.innerWidth;drawMainWindow();});</script></body></html>